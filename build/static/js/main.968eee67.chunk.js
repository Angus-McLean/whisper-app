(this["webpackJsonpwhisper-app"]=this["webpackJsonpwhisper-app"]||[]).push([[0],{23:function(e,t,a){e.exports=a(40)},28:function(e,t,a){},29:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(17),s=a.n(o),c=(a(28),a(29),a(22)),i=a(11),l=(a(30),a(42),a(33),a(41),a(19)),m=a(7),d=a(8),u=a(10),p=a(9),v=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.message,t="asdf"===e.uid;return"recording"===e.type?r.a.createElement("div",{className:"div-block-11 "+(t?"":"received")},r.a.createElement("div",{className:"div-block-10 "+(t?"":"received")},r.a.createElement("figure",{style:{margin:"10px"}},r.a.createElement("audio",{controls:!0,src:e.text})))):r.a.createElement("div",{className:"div-block-11 "+(t?"":"received")},r.a.createElement("div",{className:"div-block-10 "+(t?"":"received")},r.a.createElement("div",{className:"text-block-3"},e.text)))}}]),a}(n.Component),f=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).bottomRef=r.a.createRef(),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return console.log("MessagesList",this.props.messages),setTimeout((function(){console.log(e.bottomRef),e.bottomRef.current&&e.bottomRef.current.scrollIntoView({behavior:"smooth"})}),100),r.a.createElement("div",{style:{overflow:"scroll",height:"55vh"}},this.props.messages&&this.props.messages.reverse().map((function(e){return r.a.createElement(v,{key:e.id,message:e})})),r.a.createElement("span",{ref:this.bottomRef}))}}]),a}(n.Component),b=a(14),h=a(15),g=a.n(h),E=a(20),k=a(12),y=a(21),N=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).startRecording=function(){n.setState({record:!0})},n.stopRecording=function(){var e=Object(k.a)(n);e.setState({record:!1}),setTimeout((function(){return e.setState({record:!1})}),100)},n.state={record:!1},console.log(a,Object(k.a)(n)),n.state.record||setTimeout((function(){return n.startRecording()}),1),n}return Object(d.a)(a,[{key:"onData",value:function(e){console.log("chunk of real-time data is: ",e)}},{key:"onStop",value:function(e){console.log("recordedBlob is: ",e,this),this.saveToFirebase(e)}},{key:"saveToFirebase",value:function(e){var t=this,a="asdf",n="#";return t.props.storageRef.child("uploads/"+a+"-"+e.stopTime+".mp3").put(e.blob,{contentType:"audio/mp3"}).then((function(e){e.ref.getDownloadURL().then((function(r){console.log("audioUpload callback",e),t.props.messagesRef.add({text:r,type:"recording",createdAt:i.a.firestore.FieldValue.serverTimestamp(),uid:a,photoURL:n})}))}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"100%",height:"100%"}},r.a.createElement(y.ReactMic,{record:this.state.record,className:"sound-wave",mimeType:"audio/webm",onStop:this.onStop.bind(this),strokeColor:"#9b9b9b",width:"300",backgroundColor:"#000813"}))}}]),a}(r.a.Component),w=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).sendMessage=function(){var e=Object(E.a)(g.a.mark((function e(t){var a,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=(a={uid:"asdf",photoURL:"#"}).uid,o=a.photoURL,e.next=4,n.props.messagesRef.add({type:"text",text:n.state.inputValue,createdAt:i.a.firestore.FieldValue.serverTimestamp(),uid:r,photoURL:o});case 4:n.state.inputValue="";case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={inputType:"text",inputValue:""},console.log(r.a),n.audioRecRef=r.a.createRef(),n}return Object(d.a)(a,[{key:"render",value:function(){var e,t=this;return"text"===this.state.inputType?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.sendMessage,className:"div-block-7"},r.a.createElement("input",(e={className:"text-block-2",type:"text",value:this.state.inputValue,onChange:function(e){return t.setState({inputValue:e.target.value})},placeholder:"Type here...","aria-describedby":"button-addon2"},Object(b.a)(e,"className","form-control rounded-0 border-0 py-4 bg-light"),Object(b.a)(e,"style",{background:"transparent",width:"100%",border:"none",color:"gray",height:"min-content"}),e)),r.a.createElement("div",{className:"div-block-8"},r.a.createElement("div",{className:"div-block-9",onClick:this.sendMessage},r.a.createElement("i",{className:"fa fa-send"})),r.a.createElement("div",{className:"div-block-9"},r.a.createElement("i",{className:"fa fa-phone"})),r.a.createElement("div",{className:"div-block-9",onClick:function(){t.setState({inputType:"record"})}},r.a.createElement("i",{className:"fa fa-bullseye"}))))):"record"===this.state.inputType?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.sendMessage,className:"div-block-7"},r.a.createElement(N,{ref:this.audioRecRef,storageRef:this.props.storageRef,messagesRef:this.props.messagesRef}),r.a.createElement("div",{className:"div-block-8"},r.a.createElement("div",{className:"div-block-9",onClick:function(){console.log(t.audioRecRef&&t.audioRecRef.current),t.audioRecRef.current.stopRecording(),setTimeout((function(){t.setState({inputType:"text"})}),100)}},r.a.createElement("i",{className:"fa fa-stop"}))))):void 0}}]),a}(n.Component);i.a.initializeApp({apiKey:"AIzaSyCgNBwvWRmiD-XKVVwPlXtfeFgDxrdS1Cc",authDomain:"ecse542-whisper.firebaseapp.com",databaseURL:"https://ecse542-whisper.firebaseio.com",projectId:"ecse542-whisper",storageBucket:"ecse542-whisper.appspot.com",messagingSenderId:"994712361483",appId:"1:994712361483:web:47d47d3f160de1a275450e",measurementId:"G-S42HK278KF"});var R=i.a.firestore();window.firebase=i.a;var j=function(){var e=R.collection("messages"),t=i.a.storage().ref(),a=e.orderBy("createdAt","desc").limit(25),n=Object(l.a)(a,{idField:"id"}),o=Object(c.a)(n,1)[0];return console.log("messages",o),r.a.createElement("div",{className:"div-block-2"},r.a.createElement("div",null,r.a.createElement("div",{className:"div-block-6"},r.a.createElement("div",{className:"text-block"},"Your Group"),r.a.createElement("div",{className:"text-block less"},"Main Chat"))),r.a.createElement("div",{className:"div-block-5"},r.a.createElement("div",{className:"w-layout-grid green"},r.a.createElement("div",{className:"div-block-3"},r.a.createElement("div",{className:"div-block-4 green"},r.a.createElement("div",{className:"text-block"},"Joseff Padilla"))),r.a.createElement("div",{className:"div-block-3 hover"},r.a.createElement("div",{className:"text-block"},r.a.createElement("strong",null,"Private whisper to"),"Kaiya Bowen")),r.a.createElement("div",{className:"div-block-3 you"},r.a.createElement("div",{className:"div-block-4 green"},r.a.createElement("div",{className:"text-block"},"Jodi Avery (You)"))),r.a.createElement("div",{className:"div-block-3"},r.a.createElement("div",{className:"div-block-4 green"},r.a.createElement("div",{className:"text-block"},"Blake Kemp"))))),r.a.createElement(f,{messages:o}),r.a.createElement(w,{messagesRef:e,storageRef:t}))},O=window.JitsiMeetExternalAPI||{},x=!1,T=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.call(this)}return Object(d.a)(a,[{key:"render",value:function(){return console.log("MainJitsi",this.props),setTimeout((function(){x||(x=!0,window.api=new O("meet.jit.si",{roomName:"testRoom-asdf1234qwer",parentNode:document.getElementById("MainJitsi"),width:"100%",height:"100%",userInfo:{email:"email@jitsiexamplemail.com",displayName:"John Doe"},configOverwrite:{prejoinPageEnabled:!1}}))}),500),r.a.createElement("div",{id:"MainJitsi"})}}]),a}(n.Component);a(39);var S=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null),r.a.createElement("div",{className:"div-block"},r.a.createElement(T,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.968eee67.chunk.js.map