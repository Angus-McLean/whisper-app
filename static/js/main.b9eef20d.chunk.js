(this["webpackJsonpwhisper-app"]=this["webpackJsonpwhisper-app"]||[]).push([[0],{23:function(e,t,a){e.exports=a(40)},28:function(e,t,a){},29:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(17),s=a.n(r),c=(a(28),a(29),a(22)),i=a(11),l=(a(30),a(42),a(33),a(41),a(19)),m=a(7),d=a(8),u=a(10),p=a(9),v=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props.message,t="asdf"===e.uid;return"recording"===e.type?o.a.createElement("div",{className:"div-block-11 "+(t?"":"received")},o.a.createElement("div",{className:"div-block-10 "+(t?"":"received")},o.a.createElement("figure",{style:{margin:"10px"}},o.a.createElement("audio",{controls:!0,src:"https://firebasestorage.googleapis.com/v0/b/ecse542-whisper.appspot.com/o/uploads%2Fphoto.mp3?alt=media&token=fe732b54-3f4d-47d1-ac6e-d615bcf7962a"})))):o.a.createElement("div",{className:"div-block-11 "+(t?"":"received")},o.a.createElement("div",{className:"div-block-10 "+(t?"":"received")},o.a.createElement("div",{className:"text-block-3"},e.text)))}}]),a}(n.Component),f=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).bottomRef=o.a.createRef(),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return console.log("MessagesList",this.props.messages),setTimeout((function(){console.log(e.bottomRef),e.bottomRef.current&&e.bottomRef.current.scrollIntoView({behavior:"smooth"})}),100),o.a.createElement("div",{style:{overflow:"scroll",height:"55vh"}},this.props.messages&&this.props.messages.reverse().map((function(e){return o.a.createElement(v,{key:e.id,message:e})})),o.a.createElement("span",{ref:this.bottomRef}))}}]),a}(n.Component),b=a(14),h=a(15),g=a.n(h),E=a(20),k=a(12),y=a(21),N=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).startRecording=function(){n.setState({record:!0})},n.stopRecording=function(){n.setState({record:!1})},n.state={record:!1},console.log(a,Object(k.a)(n)),n}return Object(d.a)(a,[{key:"onData",value:function(e){console.log("chunk of real-time data is: ",e)}},{key:"onStop",value:function(e){console.log("recordedBlob is: ",e,this),this.saveToFirebase(e)}},{key:"saveToFirebase",value:function(e){var t=this,a="asdf",n="#";return t.props.storageRef.child("uploads/photo.mp3").put(e.blob,{contentType:"audio/mp3"}).then((function(){t.props.messagesRef.add({text:"uploads/photo.mp3",type:"recording",createdAt:i.a.firestore.FieldValue.serverTimestamp(),uid:a,photoURL:n})}))}},{key:"render",value:function(){return this.state.record||this.startRecording(),o.a.createElement("div",{style:{width:"100%",height:"100%"}},o.a.createElement(y.ReactMic,{record:this.state.record,mimeType:"audio/mp3",onStop:this.onStop.bind(this),strokeColor:"#FFFFFF",width:"280px",backgroundColor:"#000813"}))}}]),a}(o.a.Component),w=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).sendMessage=function(){var e=Object(E.a)(g.a.mark((function e(t){var a,o,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=(a={uid:"asdf",photoURL:"#"}).uid,r=a.photoURL,e.next=4,n.props.messagesRef.add({text:n.state.inputValue,createdAt:i.a.firestore.FieldValue.serverTimestamp(),uid:o,photoURL:r});case 4:n.state.inputValue="";case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={inputType:"text",inputValue:""},console.log(o.a),n.audioRecRef=o.a.createRef(),n}return Object(d.a)(a,[{key:"render",value:function(){var e,t=this;return"text"===this.state.inputType?o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{onSubmit:this.sendMessage,className:"div-block-7"},o.a.createElement("input",(e={className:"text-block-2",type:"text",value:this.state.inputValue,onChange:function(e){return t.setState({inputValue:e.target.value})},placeholder:"Type here...","aria-describedby":"button-addon2"},Object(b.a)(e,"className","form-control rounded-0 border-0 py-4 bg-light"),Object(b.a)(e,"style",{background:"transparent",width:"100%",border:"none",color:"gray",height:"min-content"}),e)),o.a.createElement("div",{className:"div-block-8"},o.a.createElement("div",{className:"div-block-9",onClick:this.sendMessage},o.a.createElement("i",{className:"fa fa-send"})),o.a.createElement("div",{className:"div-block-9"},o.a.createElement("i",{className:"fa fa-phone"})),o.a.createElement("div",{className:"div-block-9",onClick:function(){t.setState({inputType:"record"})}},o.a.createElement("i",{className:"fa fa-bullseye"}))))):"record"===this.state.inputType?o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{onSubmit:this.sendMessage,className:"div-block-7"},o.a.createElement(N,{ref:this.audioRecRef,storageRef:this.props.storageRef,messagesRef:this.props.messagesRef}),o.a.createElement("div",{className:"div-block-8"},o.a.createElement("div",{className:"div-block-9",onClick:function(){console.log(t.audioRecRef&&t.audioRecRef.current),t.audioRecRef.current.stopRecording(),setTimeout((function(){t.setState({inputType:"text"})}),100)}},o.a.createElement("i",{className:"fa fa-stop"}))))):void 0}}]),a}(n.Component);i.a.initializeApp({apiKey:"AIzaSyCgNBwvWRmiD-XKVVwPlXtfeFgDxrdS1Cc",authDomain:"ecse542-whisper.firebaseapp.com",databaseURL:"https://ecse542-whisper.firebaseio.com",projectId:"ecse542-whisper",storageBucket:"ecse542-whisper.appspot.com",messagingSenderId:"994712361483",appId:"1:994712361483:web:47d47d3f160de1a275450e",measurementId:"G-S42HK278KF"});var R=i.a.firestore();window.firebase=i.a;var j=function(){var e=R.collection("messages"),t=i.a.storage().ref(),a=e.orderBy("createdAt","desc").limit(25),n=Object(l.a)(a,{idField:"id"}),r=Object(c.a)(n,1)[0];return console.log("messages",r),o.a.createElement("div",{className:"div-block-2"},o.a.createElement("div",null,o.a.createElement("div",{className:"div-block-6"},o.a.createElement("div",{className:"text-block"},"Your Group"),o.a.createElement("div",{className:"text-block less"},"Main Chat"))),o.a.createElement("div",{className:"div-block-5"},o.a.createElement("div",{className:"w-layout-grid green"},o.a.createElement("div",{className:"div-block-3"},o.a.createElement("div",{className:"div-block-4 green"},o.a.createElement("div",{className:"text-block"},"Joseff Padilla"))),o.a.createElement("div",{className:"div-block-3 hover"},o.a.createElement("div",{className:"text-block"},o.a.createElement("strong",null,"Private whisper to"),"Kaiya Bowen")),o.a.createElement("div",{className:"div-block-3 you"},o.a.createElement("div",{className:"div-block-4 green"},o.a.createElement("div",{className:"text-block"},"Jodi Avery (You)"))),o.a.createElement("div",{className:"div-block-3"},o.a.createElement("div",{className:"div-block-4 green"},o.a.createElement("div",{className:"text-block"},"Blake Kemp"))))),o.a.createElement(f,{messages:r}),o.a.createElement(w,{messagesRef:e,storageRef:t}))},O=window.JitsiMeetExternalAPI||{},x=!1,F=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.call(this)}return Object(d.a)(a,[{key:"render",value:function(){return console.log("MainJitsi",this.props),setTimeout((function(){x||(x=!0,window.api=new O("meet.jit.si",{roomName:"testRoom-asdf1234qwer",parentNode:document.getElementById("MainJitsi"),width:"100%",height:"100%",userInfo:{email:"email@jitsiexamplemail.com",displayName:"John Doe"},configOverwrite:{prejoinPageEnabled:!1}}))}),500),o.a.createElement("div",{id:"MainJitsi"})}}]),a}(n.Component);a(39);var S=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(j,null),o.a.createElement("div",{className:"div-block"},o.a.createElement(F,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.b9eef20d.chunk.js.map